<section class="header bg-light">
  <div class="container" id="menu-display" style="display: none; position: absolute; z-index: 99; left: 176px;">
    <div class="row">
      <div class="col-md-3" style="margin-right: -15px; max-width: 255px;">
        <!-- CATEGORIES -->
        <div class="categorycontent">
          <ul>
            <% Category.where(role: true).each do |category| %>
            <li> <a href=""><%= category.name %></a><i class="bi bi-chevron-right float-end"></i>
              <ul>
                <li class="liheader"><a href="" class="header text-uppercase"><%= category.name %></a></li>
                <% subors = category.subordinates %>
                <div class="content trai">
                  <% subors.limit(5).each do |subor| %>
                  <li><a href="<%= category_path(subor) %>"><%= subor.name %></a></li>
                  <% end %>
                </div>
                <div class="content phai">
                  <% lim = subors.count < 10 ? (subors.count - 5) : 4  %>
                  <% subors.limit(lim).offset(5).each do |subor| %>
                  <li><a href="<%= category_path(subor) %>"><%= subor.name %></a></li>
                  <% end %>
                </div>
              </ul>
            </li>
            <% end %>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
    var menu_categories = document.getElementById('menu-categories');

    document.addEventListener('click', function(event) {
      var isClickInsideElement = menu_categories.contains(event.target);
      var menu_display = document.getElementById('menu-display');
      var display = menu_display.style.display;
      if (isClickInsideElement) { 
        if (display === "none") {
          menu_display.style.display = "block";
          menu_categories.style.color = "#cf111a";
        } else {
          menu_display.style.display = "none";
          menu_categories.style.color = "#000000";
        }
      } else {
        if (display === "block") {
          menu_display.style.display = "none";
          menu_categories.style.color = "#000000";
        }
      }
    });
  </script>
</section>